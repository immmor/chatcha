<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>repl.it</title>
	<link href="style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  
  <style>
  #draggable { width: 15px; height: 15px; padding: 0.5em; }
  </style>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
  $( function() {
    $( "#draggable" ).draggable();
  } );
  </script>
 
</head>

<body>
	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-app.js">
	</script>

  <script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-database.js">
	</script>

	<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

	<script>
	// Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyD8eAdvFH8rTHntf0MVTLIU5csDL-10LWI",
    authDomain: "chatcha3-972a6.firebaseapp.com",
    databaseURL: "https://chatcha3-972a6.firebaseio.com",
    projectId: "chatcha3-972a6",
    storageBucket: "chatcha3-972a6.appspot.com",
    messagingSenderId: "17001940348",
    appId: "1:17001940348:web:72c13f63aaf6e00c6ed0f9"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);




  

  var myName = prompt("请为自己起个名字");
  function sendMessage(){
    var message = document.getElementById("message").value;
    firebase.database().ref("messages").push().set({
      "sender": myName,
      "message": message
    });
    return false;
  }

  firebase.database().ref("messages").on("child_added", function (snapshot){
    var html = "";
    html += "<li id='message-" + snapshot.key + "'>";
      if (snapshot.val().sender == myName) {
        html += "<button data-id='" + snapshot.key + "' onclick='deleteMessage(this);'>";
          html += "删除";
        html += "</button>";
      }


      html += snapshot.val().sender + ": " + snapshot.val().message;
    html += "</li>";

    document.getElementById("messages").innerHTML += html;
  });

  function deleteMessage(self) {
    var messageId = self.getAttribute("data-id");

    firebase.database().ref("messages").child(messageId).remove();
  }

  firebase.database().ref("messages").on("child_removed", function (snapshot) {
    document.getElementById("message-" + snapshot.key).innerHTML = "此消息已删除";
    });



 //let btnClear = document.querySelector('submit');
 // let inputs = document.querySelectorAll('message');

  //btnClear.addEventListener('click', () => {
  //  inputs.forEach(message => input.value = '');
 // });

 function playMusic(){
  var music = new Audio('perfect.mp3');
  music.play();
  }

 

//onfocus="this.value=''"


	</script>

  <div id="draggable" class="ui-widget-content" style="background-color: green">
  <p></p>
  </div>
  <p style="font-size:40px; line-height: 2px; text-align:center;">柴&nbsp;茶&nbsp;聊&nbsp;天&nbsp;室</p>
  <p style="font-size:15px; line-height: 1px; text-align:center;">C&nbsp;H&nbsp;A&nbsp;T&nbsp;C&nbsp;H&nbsp;A</p>
  <form  id="myForm" onsubmit="return sendMessage() && zailai()" style="text-align:center;">
    <input id="message"  size="33"  style="height:19px;font-size:13px; border-radius: 0px; border: 2px solid black; " placeholder="在此输入内容" autocomplete="off">
    <input type="submit" value="发送" onclick="playMusic()" style ="height:29px; width: 55px; background-color:black; font-size:13px; color:white; border: 2px solid black; border-radius: 0px; -webkit-appearance: none;">
    <input type="reset" value="净"  style="height:29px; width: 29px; background-color:black; font-size:13px; color:black; border: 2px solid black; border-radius: 0px; -webkit-appearance: none;">
  </form>
   
  
  <ul id="messages"></ul>


 



	
</body>

</html>
